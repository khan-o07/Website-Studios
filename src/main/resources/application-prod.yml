# ═══════════════════════════════════════════════════════════════
#  Website Studios API — Production Profile
# ═══════════════════════════════════════════════════════════════

spring:
  jpa:
    show-sql: false
    properties:
      hibernate:
        format_sql: false

  # ──── Swagger DISABLED in production ────
  # The @Profile("dev") on SwaggerConfig already handles this,
  # but we also disable the springdoc auto-configuration
  autoconfigure:
    exclude:
      - org.springdoc.core.configuration.SpringDocConfiguration

# ──── Server ────
server:
  error:
    include-message: never
    include-binding-errors: never
    include-stacktrace: never
    include-exception: false

# ──── Actuator (minimal in prod) ────
management:
  endpoints:
    web:
      exposure:
        include: health, info, prometheus
  endpoint:
    health:
      show-details: never

# ──── Logging (minimal in prod) ────
logging:
  level:
    root: WARN
    com.websitestudios: INFO
    org.springframework.security: WARN
    org.springframework.web: WARN
    org.hibernate.SQL: WARN

# ── Phase 7 prod overrides ───────────────────────────────────────

ws:
  rate-limit:
    enabled: true
    public-api-requests-per-minute: 60
    form-submit-requests-per-minute: 5
    login-requests-per-minute: 3
    same-contact-cooldown-minutes: 10

  captcha:
    enabled: true
    secret-key: ${RECAPTCHA_SECRET_KEY}
    site-key: ${RECAPTCHA_SITE_KEY}
    min-score: 0.5